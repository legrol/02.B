# ══ Compilation══════════════════════════════════════════════════════════════ #
#    -----------                                                               #
# ════════════════════════════════════════════════════════════════════════════ #
CC := gcc
AR := ar rcs

# ══ Flags ═══════════════════════════════════════════════════════════════════ #
#    -----                                                                     #
# ════════════════════════════════════════════════════════════════════════════ #
ASFLAGS := --32

# ══ Directories ═════════════════════════════════════════════════════════════ #
#    -----------                                                               #
# ════════════════════════════════════════════════════════════════════════════ #
OBJ_DIR := ../../obj

# ══ Sources ═════════════════════════════════════════════════════════════════ #
#    -------                                                                   #
# ════════════════════════════════════════════════════════════════════════════ #
SRCS := $(wildcard *.s)
# All library functions now in pure assembly - no C files needed

# ══ Objects ═════════════════════════════════════════════════════════════════ #
#    -------                                                                   #
# ════════════════════════════════════════════════════════════════════════════ #
OBJS := $(patsubst %.s,$(OBJ_DIR)/%.o,$(SRCS))

# ══ Library ═════════════════════════════════════════════════════════════════ #
#    -------                                                                   #
# ════════════════════════════════════════════════════════════════════════════ #
LIB := libb.a

# ═══ Rules ══════════════════════════════════════════════════════════════════ #
#     -----                                                                    #
# ════════════════════════════════════════════════════════════════════════════ #
all: $(LIB)

$(OBJ_DIR):
	@mkdir -p $(OBJ_DIR)

$(OBJ_DIR)/%.o: %.s | $(OBJ_DIR)
	as $(ASFLAGS) $< -o $@

$(LIB): $(OBJS)
	$(AR) $(LIB) $(OBJS)

clean:
	rm -f $(OBJS) $(LIB)

.PHONY: all clean
